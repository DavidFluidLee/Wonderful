<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<link rel="stylesheet" type="text/css" href="css/w.css"/>
<link rel="stylesheet" type="text/css" href="css/app.css"/>
<script src="script/time_selector.js"></script>
<script src="script/add_node.js"></script>
<script src="script/dialog.js"></script>
</head>

<body>
<div data-w_role="page">
    <div data-w_role="header" align="center" class="header1" id='header'>
   		<table width="100%" style="height:100%; ">
			<tr>
				<td><label class="label1" >类型</label></td>
				<td>
				<select  class="input_top "  id='option-01' onchange="changecode()">  
				  <option value ="1">1.直上柜</option>  
				  <option value ="2">2.配送</option>  
				</select>  
			</tr>
			<tr>
				<td><label class="label1 ">采购单／板码</label></td>
				<td><input class="input_top noborder_input" id='code' type="text"/></td>
			</tr>
		</table>
    </div>
    <div data-w_role="content" align="center">
    		<div class="content_left  div_border_right" id='content-left'>
				<ul id='ul_name'style="margin: 0px"><li class="left_li"><label class="label1 div_block div_border_bottom2" style="display: inherit;">产品条码</label>
				</li>
				<li><label class="label1 div_block div_border_bottom2" >商品</label></li>
				<li><label class="label1 div_block div_border_bottom2" >规格</label></li>
				<li><label class="label1 div_block div_border_bottom2" >采购数量</label></li>
				<li class="left_li"><label class="label1 div_block div_border_bottom2">收货数量</label></li>
				<li><label class="label1 div_block div_border_bottom2" >单位</label></li>
				<li class="left_li"><label class="label1 div_block div_border_bottom2">保质期</label></li></ul>
		</div>
		<div class="content_right"><ul id='content_ul'><li class="vs-current div_content div_border_left" id='li_1' >
				<input type="text" id="input1_0" class="content_input label1 div_block div_border_bottom" value="abc-abc-1234"/>
				<input type="text" id="input2_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input3_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input4_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="number" id="input4_0" class="content_input label1 div_block div_border_bottom" value="3000" min="0"/>
				<input type="text" id="input5_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input6_0" class="content_input label1 div_block div_border_bottom" onfocus="HS_setDate(this)" readonly="true"/>
		</li><li class="vs-right div_content div_border_left" id='li_2' >
			<input type="text" id="input1_0" class="content_input label1 div_block div_border_bottom" value=""/>
				<input type="text" id="input2_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input3_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input4_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="number" id="input4_0" class="content_input label1 div_block div_border_bottom" value="" />
				<input type="text" id="input5_0" class="content_input label1 div_block div_border_bottom" value=""  readonly="true"/>
				<input type="text" id="input6_0" class="content_input label1 div_block div_border_bottom" onfocus="HS_setDate(this)" readonly="true"/>
		</li>
		</ul>
	</div>
	<div class="dir_right" id='btn_prev'><img src="image/left.png" class="dir_img">
	</div>
	<div class="dir_left" id='btn_next'><img src="image/right.png" class="dir_img">
	</div>

</div>

	<div data-w_role="footer_bar" align="center" class="div_border_top footerbar_01" id='footer_bar' >
	<ul class="ul1">

			<li id="bar_num">
				<label class="label2 num_big" id='num_0'>1</label>
				<label class="label2" id='num_1 '>2</label>
				<label class="label2" id='num_2'>3</label>
				<label class="label2" id='num_3'>4</label>
			</li>
			<li name="footer">
				<img id='save_btn' src="image/lock-01.png" height="25px">
			</li>
		</ul>
	</div>
    <div data-w_role="footer" align="center" id='footer'>
		<ul>
			<li>
				<a class="bottom_btn "> 商品笔数 : <label id="label_count">1</label>|</a>
			</li>
			<li>
				<input type="number" class="fotter_input noborder_input" id='input_num' min="1"/>
				<label  class="bottom_btn" id='label_GO'>GO | </label>			</li>
			<li>
				<a class="bottom_btn  " href="navbar.html"> 返回菜单 </a>
			</li>
		</ul>

    </div>
</body>
<script>
	
var nStartY=0;
var nStartX=0;
var nChangX=0;
var nChangY=0;
var flag=true;
var flag_save=false;//保存成功标志

var target_move=document.getElementById('content_ul');
var clientWidth=target_move.offsetWidth;

 target_move.addEventListener('touchstart', function (e) {
        nStartY = e.targetTouches[0].pageY;
        nStartX = e.changedTouches[0].screenX;
        //event.preventDefault();
    });
 target_move.addEventListener('touchmove', function (e) {
        nChangY = e.changedTouches[0].pageY;
        nChangX = e.changedTouches[0].screenX;
  /*      if(flag){
	        if(nChangX-nStartX<(0-clientWidth/3)){
		      alert('touchmove');
		      create_div(document.getElementById('li_0'));
	        }
        }*/
		var target=document.getElementsByClassName('num_big');
		var num=target[0].innerHTML;
        var move_target=document.getElementById('li_'+num).style.left=nChangX;
        })

target_move.addEventListener('touchend', function (e) {
        nChangY = e.changedTouches[0].pageY;
        nChangX = e.changedTouches[0].screenX;
        if(nChangX-nStartX<(0-clientWidth/3)){
			var target=document.getElementsByClassName('num_big');
			var num=target[0].innerHTML;
			var page_num=parseInt(num)+1;
			next_div(target_move,page_num);
			setTimeout(div_transform(page_num,'left',target_move),5000);
        }
        if(nChangX-nStartX>(clientWidth/3)){
			var target=document.getElementsByClassName('num_big');
			var num=target[0].innerHTML;
			var page_num=parseInt(num)-1;
			div_transform(page_num,'right',target_move);
			change_num(page_num);
        }   
})
document.getElementById('btn_prev').onclick=function(){
	var target=document.getElementsByClassName('num_big');
	var num=target[0].innerHTML;
	var page_num=parseInt(num)+1;
	next_div(target_move,page_num);
	setTimeout(div_transform(page_num,'left',target_move),5000);
}
document.getElementById('btn_next').onclick=function(){
	var target=document.getElementsByClassName('num_big');
	var num=target[0].innerHTML;
	var page_num=parseInt(num)-1;
	div_transform(page_num,'right',target_move);
	change_num(page_num);
}

changeheight('ul_name');	

function changecode(){//复选框选择2自动带出编码效果
	var target=document.getElementById('code');	
	var selectedoption=OptionChecked('option-01');
	if(selectedoption.value=='2'){
		target.value='ROD-00312003000043';
		target.disabled=true;
	}
	else{
		target.value='';
		target.disabled=false;
	}
}
function error_fun01()
{
	var diag = new Dialog();
	diag.Width = 200;
	diag.Height = 100;
	diag.AutoClose = 2;
	diag.ImgUrl='image/error-01.png';
	diag.show();
}
function error_fun02()
{
	var diag = new Dialog();
	diag.Width = 200;
	diag.Height = 100;
	diag.AutoClose = 2;
	diag.ImgUrl='image/error-02.png';
	diag.show();
}
function error_fun03()
{
	var diag = new Dialog();
	diag.Width = 200;
	diag.Height = 100;
	diag.AutoClose = 2;
	diag.ImgUrl='image/error-03.png';
	diag.show();
}		
var btn_save=document.getElementById('save_btn');

	btn_save.onclick=function(){//点击保存
		var target_ul=document.getElementById('content_ul');
		var Json=getinputJson(target_ul);
		//Json=JSON.parse(Json);
		//alert(Json);
		//error_fun01();
		if(!flag_save){
			error_fun02();
		}
	}
function getinputJson(obj){
		var target_li=new Array();
		var r;
		for(var i=0;i<obj.children.length-1;i++){
			var child_li=obj.children[i];
			target_li[i]=new Array();
			for(var j=0;j<child_li.children.length;j++){
				
				 target_li[i][j]='"'+child_li.children[j].id.split('_')[0]+'":"'+child_li.children[j].value+'"';
			}
			target_li[i] = "[" + target_li[i].join() + "]";
		}
		btn_save.setAttribute('src', 'image/lock-02.png');
		r = "{" + target_li.join() + "}";
		return r ;

}
	
var btn_GO=document.getElementById('label_GO');//输入页码页面跳转
	btn_GO.onclick=function(){
		var target=document.getElementsByClassName('num_big');
		var num=target[0].innerHTML;
		var num_input=document.getElementById("input_num").value;
		num_input=((num_input=='')?num:num_input);
		num_input=parseInt(num_input);
		getPage(num_input);
	}
/*	
　function arrayToJson(o) {　　//数组转json
　　var r = [];　　
　　if (typeof o == "string") return "\"" + o.replace(/([\'\"\\])/g, "\\$1").replace(/(\n)/g, "\\n").replace(/(\r)/g, "\\r").replace(/(\t)/g, "\\t") + "\"";　　
　　if (typeof o == "object") {　　
　　if (!o.sort) {　　
　　for (var i in o)　　
　　r.push(i + ":" + arrayToJson(o[i]));　　
　　if (!!document.all && !/^\n function\s*toString\(\)\s*\{\n \s*\[native code\]\n \s*\}\n \s*$/.test(o.toString)) {　　
　　r.push("toString:" + o.toString.toString());　　
　　}　　
　　r = "{" + r.join() + "}";　　
　　} else {　　
　　for (var i = 0; i < o.length; i++) {　　
　　r.push(arrayToJson(o[i]));　　
　　}　　
　　r = "[" + r.join() + "]";　　
　　}　　
　　return r;　　
　　}　　
　　return o.toString();　　
　　}　　
*/
</script>
</html>
